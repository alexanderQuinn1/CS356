{% extends 'prod-line-monitor.html' %}

{% block head %}
{{ super() }}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='/monitor.css') }}">
{% endblock %}

{% block prod_activity %}
<div class="row">
    <a class="bm-monitor-link" href="/update_passage_monitor"><i class="fas fa-edit"></i>Update Monitor</a>
</div>
<div class="row g-2">
    <div class="col-md-3">
        <div class="bm-monitor-info-block">
            <h4 class="bm-monitor-info-block__title">Peristaltic Pump</h4>
            <span class="bm-monitor-info-block__text">{{ monitor.peristaltic_pump }}</span>
        </div>
    </div>
    <div class="col-md-3">
        <div class="bm-monitor-info-block">
            <h4 class="bm-monitor-info-block__title">Cell Count</h4>
            <span class="bm-monitor-info-block__text">{{ monitor.cell_count }}</span>
        </div>
    </div>

    {% if qa %}
    <div class="col-md-3">
        <div class="bm-monitor-info-block bm-monitor-info-block--{{qa.colour}}">
            <h4 class="bm-monitor-info-block__title">QA Results</h4>
            <span class="bm-monitor-info-block__text">{{ qa.status }}</span>
        </div>
    </div>
        {% if qa.status == 'pass' %}
        <div class="col-md-3">
            <div class="bm-monitor-info-block bm-monitor-info-block--blue bm-monitor-info-block--clickable">
                <h4 class="bm-monitor-info-block__title">Proceed to next stage</h4>
                <i class="fa-solid fa-arrow-right"></i>
            </div>
        </div>
        {% endif %}
    {% else %}
    <div class="col-md-3">
        <div onclick="addQA()" class="bm-monitor-info-block bm-monitor-info-block--blue bm-monitor-info-block--clickable">
            <h4 class="bm-monitor-info-block__title">Add QA</h4>
            <i class="fa-xl fa-solid fa-plus bm-monitor-info-block__button"></i>
        </div>
    </div>
    {% endif %}
</div>

<script>
function addQA() {
  window.location.href = '/qa-entry'
}
</script>

{% endblock %}